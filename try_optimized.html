<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Otomotiv - Stok ve Satış Yönetimi</title>
    <script src="https://cdn.sheetjs.com/xlsx-latest/package/dist/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
    
    <!-- External CSS -->
    <link rel="stylesheet" href="/public/style.css">
</head>
<body>
    <div class="container">
        <!-- Header Section -->
        <div class="header-section">
            <div class="logo-container">
                <div class="logo-icon">
                    <div class="logo-glow"></div>
                    <i class="fas fa-car"></i>
                </div>
                <div class="logo-text">
                    <h1>Sabancıoğlu Otomotiv</h1>
                    <span class="subtitle">Stok ve Satış Yönetimi</span>
                </div>
            </div>
        </div>

        <!-- Modern Menu Button -->
        <div class="modern-menu-button" onclick="toggleMainMenu()">
            <i class="fas fa-bars"></i>
            <span>Menü</span>
        </div>

        <!-- Main Menu Dropdown -->
        <div class="main-menu-dropdown" id="mainMenuDropdown">
            <div class="menu-item" onclick="showTab('stock')">
                <i class="fas fa-boxes"></i>
                <span>Stok Yönetimi</span>
            </div>
            <div class="menu-item" onclick="showTab('sales')">
                <i class="fas fa-shopping-cart"></i>
                <span>Satış İşlemleri</span>
            </div>
            <div class="menu-item" onclick="showTab('customers')">
                <i class="fas fa-users"></i>
                <span>Müşteriler</span>
            </div>
            <div class="menu-item" onclick="showTab('debts')">
                <i class="fas fa-credit-card"></i>
                <span>Borçlarım</span>
            </div>
            <div class="menu-item" onclick="showTab('reports')">
                <i class="fas fa-chart-bar"></i>
                <span>Raporlar</span>
            </div>
            <div class="menu-item" onclick="toggleTheme()">
                <i class="fas fa-moon theme-icon"></i>
                <span>Tema Değiştir</span>
            </div>
            <div class="sync-status-indicator">
                <div class="sync-indicator online" id="syncIndicator"></div>
                <span id="syncStatus">Çevrimiçi</span>
                <div class="sync-controls">
                    <button class="sync-button" onclick="manualSync()" title="Manuel Senkronizasyon">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Stats Container -->
        <div class="stats-container">
            <div class="stat-card">
                <div class="stat-icon primary">
                    <i class="fas fa-boxes"></i>
                </div>
                <div class="stat-info">
                    <h3 id="totalProducts">0</h3>
                    <p>Toplam Ürün</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon success">
                    <i class="fas fa-shopping-cart"></i>
                </div>
                <div class="stat-info">
                    <h3 id="totalSales">0</h3>
                    <p>Toplam Satış</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon warning">
                    <i class="fas fa-users"></i>
                </div>
                <div class="stat-info">
                    <h3 id="totalCustomers">0</h3>
                    <p>Müşteri Sayısı</p>
                </div>
            </div>
        </div>

        <!-- Main Content Tabs -->
        <div class="tabs">
            <div class="tab active" onclick="showTab('stock')">
                <i class="fas fa-boxes"></i> Stok Yönetimi
            </div>
            <div class="tab" onclick="showTab('sales')">
                <i class="fas fa-shopping-cart"></i> Satış İşlemleri
            </div>
            <div class="tab" onclick="showTab('customers')">
                <i class="fas fa-users"></i> Müşteriler
            </div>
            <div class="tab" onclick="showTab('debts')">
                <i class="fas fa-credit-card"></i> Borçlarım
            </div>
            <div class="tab" onclick="showTab('reports')">
                <i class="fas fa-chart-bar"></i> Raporlar
            </div>
        </div>

        <!-- Tab Contents -->
        <div id="stock" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <i class="fas fa-plus"></i> Yeni Ürün Ekle
                </div>
                <div class="card-body">
                    <form class="form-grid" id="addProductForm">
                        <div class="form-group">
                            <label>Barkod</label>
                            <input type="text" id="barkod" class="form-control" placeholder="Barkod girin" required>
                        </div>
                        <div class="form-group">
                            <label>Ürün Adı</label>
                            <input type="text" id="urunAdi" class="form-control" placeholder="Ürün adı girin" required>
                        </div>
                        <div class="form-group">
                            <label>Marka</label>
                            <input type="text" id="marka" class="form-control" placeholder="Marka girin">
                        </div>
                        <div class="form-group">
                            <label>Kategori</label>
                            <input type="text" id="kategori" class="form-control" placeholder="Kategori girin">
                        </div>
                        <div class="form-group">
                            <label>Stok Miktarı</label>
                            <input type="number" id="stokMiktari" class="form-control" min="0" placeholder="Miktar girin">
                        </div>
                        <div class="form-group">
                            <label>Alış Fiyatı (₺)</label>
                            <input type="number" id="alisFiyati" class="form-control" step="0.01" min="0" placeholder="Alış fiyatı">
                        </div>
                        <div class="form-group">
                            <label>Satış Fiyatı (₺)</label>
                            <input type="number" id="satisFiyati" class="form-control" step="0.01" min="0" placeholder="Satış fiyatı">
                        </div>
                        <div class="form-group">
                            <label>Açıklama</label>
                            <input type="text" id="aciklama" class="form-control" placeholder="Ürün açıklaması">
                        </div>
                    </form>
                    <div style="margin-top: 20px;">
                        <button class="btn btn-primary" onclick="addProduct()">
                            <i class="fas fa-plus"></i> Ürün Ekle
                        </button>
                        <button class="btn btn-outline" onclick="clearForm()">
                            <i class="fas fa-broom"></i> Temizle
                        </button>
                    </div>
                </div>
            </div>

            <!-- Stock List -->
            <div class="card">
                <div class="card-header">
                    <i class="fas fa-list"></i> Stok Listesi
                    <div class="view-toggle">
                        <button class="active" onclick="toggleView('table')" title="Tablo Görünümü">
                            <i class="fas fa-table"></i>
                        </button>
                        <button onclick="toggleView('cards')" title="Kart Görünümü">
                            <i class="fas fa-th"></i>
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="table-controls">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" id="stockSearch" placeholder="Ürün ara..." onkeyup="filterStock()">
                        </div>
                        <button class="btn btn-info" onclick="exportToExcel()">
                            <i class="fas fa-file-excel"></i> Excel İndir
                        </button>
                    </div>
                    
                    <!-- Table View -->
                    <div class="table-container" id="stockTableView">
                        <table id="stockTable">
                            <thead>
                                <tr>
                                    <th onclick="sortTable('barkod')">Barkod</th>
                                    <th onclick="sortTable('urun_adi')">Ürün Adı</th>
                                    <th onclick="sortTable('marka')">Marka</th>
                                    <th onclick="sortTable('kategori')">Kategori</th>
                                    <th onclick="sortTable('stok_miktari')">Stok</th>
                                    <th onclick="sortTable('alisFiyati')">Alış</th>
                                    <th onclick="sortTable('satisFiyati')">Satış</th>
                                    <th>İşlemler</th>
                                </tr>
                            </thead>
                            <tbody id="stockTableBody">
                                <!-- Stock items will be populated here -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Card View -->
                    <div class="card-view" id="stockCardView" style="display: none;">
                        <!-- Stock cards will be populated here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Other tab contents would follow the same pattern -->
        <div id="sales" class="tab-content" style="display: none;">
            <!-- Sales content -->
        </div>

        <div id="customers" class="tab-content" style="display: none;">
            <!-- Customers content -->
        </div>

        <div id="debts" class="tab-content" style="display: none;">
            <!-- Debts content -->
        </div>

        <div id="reports" class="tab-content" style="display: none;">
            <!-- Reports content -->
        </div>
    </div>

    <!-- External JavaScript -->
    <script src="/public/app.js" defer></script>
</body>
</html>